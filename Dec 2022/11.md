## Dec 11, 2022 TIL

### 1. Compose 레이아웃 기본사항 공부 및 핵심 요약 (3h)
문서: https://developer.android.com/jetpack/compose/layouts/basics

#### State가 UI 요소로 변환되는 순서
1. Composition
2. Layout
3. Drawing

![composition-layout-drawing](https://user-images.githubusercontent.com/49600974/206891781-17244583-1ab8-4d67-bce3-209af5c141be.jpg)

#### Layout 단계의 주요 목표
1. 고성능
2. 손쉬운 맞춤 레이아웃 작성

Android 뷰 시스템에서 RelativeLayout 같은 특정 뷰를 여러번 중첩하면 성능 문제가 발생했으나 Compose는 여러번 측정하는 것을 방지하므로 성능에 영향을 미치지 않고 원하는 만큼 깊이 중첩해도 괜찮다.

#### 구성 가능한 함수 기본사항
구성 가능한 함수는 UI의 일부를 설명하는 Unit을 내보내는 함수이다.

Compose는 중첩된 레이아웃을 효율적으로 처리하므로 중첩된 레이아웃을 사용하면 복잡한 UI를 디자인 하는 데 도움이 된다.  
이 기능은 성능상의 이유로 중첩 레이아웃을 피해야 하는 Android 뷰에서 개선되었다.

#### 레이아웃 모델
레이아웃 모델에서 UI 트리는 단일 패스로 배치된다.  
각 노드는 먼저 자체 측정을 요청받고 하위 요소를 반복적으로 측정하여 크기 제약 조건을 아래 하위 요소로 전달한다.  
그러면 리프 노드가 크기 지정 및 배치되고 확인된 크기 및 배치 안내는 다시 트리 위로 전달된다.  
상위 요소는 하위 요소보다 먼저 측정되지만 크기와 위치는 하위 요소 다음에 지정된다.

![search-result-layout](https://user-images.githubusercontent.com/49600974/206891863-5635e59d-aabe-406d-816c-5571b911c435.svg)

#### 성능
Compose는 하위 요소를 한 번만 측정하여 높은 성능을 발휘한다.  
레이아웃에 여러 측정이 필요하면 Compose는 내장 측정 기능이라는 특수한 시스템을 제공한다.  
측정과 배치는 레이아웃 패스의 별개 하위 단계이므로, 항목의 측정이 아닌 배치에만 영향을 미치는 모든 변경사항은 별도로 실행할 수 있다.

#### 레이아웃에서 수정자 사용
clickable 속성에는 ripple 효과가 기본으로 포함된다.  
fillMaxWidth 속성은 상위 요소로부터 부여받은 최대 넓이를 채우도록 한다.  
size 속성은 width, height을 동시에 적용한다.  
수정자는 Android 뷰 기반 레이아웃에서 레이아웃 매개변수의 역할과 유사한 역할을 한다.  
수정자는 때로는 범위에 따라 다르므로 유형 안정성을 제공하며, 특정 레이아웃에 사용 및 적용이 가능한 요소를 찾고 이해하는 데 도움이 된다.  
XML 레이아웃을 사용하면 특정 레이아웃 속성이 지정된 뷰에 적용 가능한지를 확인하기 어려울 때가 있다.

#### 반응형 레이아웃 
상위 요소의 제약 조건을 파악하고 그에 따라 레이아웃 디자인하려면 BoxWithConstraints를 사용하면 된다.

#### 슬롯 기반 레이아웃
머티리얼 구성요소는 Compose가 컴포저블 위에 맞춤설정 레이어를 배치하기 위해 도입한 패턴인 슬롯 API를 많이 사용한다.  
이 접근 방식을 사용하면 하위 요소의 모든 구성 매개변수를 노출하지 않고 자체적으로 하위 요소를 구성할 수 있으므로 구성요소의 유연성이 향상된다.  
Scaffold는 가장 일반적인 상위 머티리얼 구성 요소용 슬롯을 제공한다.

![layout-appbar-slots](https://user-images.githubusercontent.com/49600974/206892051-29875fd3-691f-4494-a3be-98554af2fa21.png)

#### 후기
arrangement, alignment의 차이에 대해서 분석 후 블로그 글 쓰자.  
레이아웃 모델에 관해 분석 후 블로그 글 쓰자.
